private setQuizState = (lessonId: number, patch: Partial<QuizState>) => {
  this.setState(function(s) {
    var next: any = {};
    var k: string;
    for (k in s.quizByLesson) if (Object.prototype.hasOwnProperty.call(s.quizByLesson, k)) next[k] = s.quizByLesson[k];

    var base: QuizState = next[lessonId] || { answers: {}, submitted: false };
    var merged: QuizState = {
      answers: (patch.answers ? patch.answers : base.answers),
      submitted: (typeof patch.submitted === 'boolean' ? patch.submitted : base.submitted),
      score: (typeof patch.score !== 'undefined' ? patch.score : base.score)
    };
    next[lessonId] = merged;
    return { quizByLesson: next } as any;
  });
};