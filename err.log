private toggleAnswer = (lessonId: number, q: any, optId: string, checked: boolean) => {
  var qs = this.getQuizState(lessonId);
  var current = qs.answers[q.id] ? qs.answers[q.id].slice() : [];

  if (q.type === 'single' || q.type === 'boolean') {
    current = checked ? [optId] : [];
  } else {
    var idx = current.indexOf(optId);
    if (checked) {
      if (idx === -1) current.push(optId);
    } else {
      if (idx !== -1) current.splice(idx, 1);
    }
  }

  var nextAnswers: any = {};
  var k: string;
  for (k in qs.answers) if (Object.prototype.hasOwnProperty.call(qs.answers, k)) nextAnswers[k] = qs.answers[k];
  nextAnswers[q.id] = current;

  this.setQuizState(lessonId, { answers: nextAnswers });
};